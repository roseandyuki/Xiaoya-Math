# 地宫探索RPG游戏 - MathQuest

## 项目概述
基于 Phaser.js 3.x 开发的地牢探索RPG游戏，结合数学学习的教育游戏。采用前后端分离架构，通过探索地宫、NPC交互和战斗来推动剧情，同时融入数学题目挑战。

## 完整项目结构 ✅
```
小雅老师的高数屋/
├── index.html                  # 游戏入口页面
├── game.js                     # 游戏核心逻辑
├── README.md                   # 项目说明文档
├── assets/                     # 游戏资源文件夹 ✅
│   ├── README.md              # 资源文件夹说明
│   ├── images/                # 图片资源 ✅
│   │   ├── heroes/            # 英雄角色精灵图 ✅
│   │   │   └── README.md      # 英雄资源说明
│   │   ├── monsters/          # 怪物精灵图 ✅
│   │   │   └── README.md      # 怪物资源说明
│   │   └── ui/                # UI界面元素 ✅
│   │       └── README.md      # UI资源说明
│   ├── audio/                 # 音频资源 ✅
│   │   └── README.md          # 音频资源说明
│   └── data/                  # 游戏数据文件 ✅
│       ├── README.md          # 数据文件说明
│       └── maps/              # 地图数据 ✅
│           ├── README.md      # 地图数据说明
│           └── level1.json    # 第一关地图数据 ✅
├── docs/                      # 项目文档 ✅
│   └── README.md              # 文档说明
└── backend/                   # 后端API服务 ✅
    ├── manage.py              # Django管理脚本
    ├── mathquest_backend/     # 项目配置
    ├── users/                 # 用户管理模块
    ├── game/                  # 游戏数据模块
    ├── requirements.txt       # Python依赖
    └── venv/                  # 虚拟环境
```

## 当前实现的功能

### 1. 基础框架搭建 ✅
- [x] HTML页面结构
- [x] Phaser.js CDN引入
- [x] 游戏配置设置
- [x] 响应式布局

### 2. 四个核心场景 ✅
- [x] **IntroScene（开场视频）**
  - 自动加载并播放 intro_video.mp4
  - 支持空格键或任意键跳过视频
  - 视频播放完成后自动切换到主菜单
  - 视频加载失败时显示备用开场画面
  - 完善的错误处理机制

- [x] **MainMenuScene（主菜单）** ⭐ 新增
  - 精美的游戏标题和副标题
  - 四个菜单选项：开始游戏、继续游戏、游戏设置、关于游戏
  - 支持键盘上下键和鼠标选择
  - 回车键或空格键确认选择
  - 流畅的菜单动画效果
  - 装饰性背景和星空效果

- [x] **NPCScene（NPC交互）**
  - 对话框界面
  - NPC名称显示
  - 对话文本区域
  - 返回按钮功能

- [x] **DungeonScene（地宫探索）**
  - 游戏主界面
  - 临时玩家/敌人表示
  - 控制说明显示
  - ESC键返回主菜单功能
  - 场景切换功能

### 3. 视频播放系统 ✅ ⭐ 新增
- [x] 开场视频自动播放
- [x] 视频跳过功能（空格键/任意键/鼠标点击）
- [x] 视频播放完成自动切换
- [x] 视频加载错误处理
- [x] 备用开场画面显示

### 4. 完善的交互系统 ✅
- [x] 场景间流畅切换（带淡入淡出效果）
- [x] 鼠标点击事件
- [x] 键盘输入监听（方向键、空格、回车、ESC）
- [x] 按钮悬停效果
- [x] 菜单选择动画
- [x] 用户友好的提示信息

## 技术特点

1. **模块化设计**：每个场景独立封装，便于维护和扩展
2. **响应式布局**：支持不同屏幕尺寸自适应
3. **中文支持**：完整的中文界面和字体配置
4. **物理引擎**：集成Arcade物理引擎，为后续功能做准备
5. **事件驱动**：完善的用户交互事件处理

## 下一步开发计划

1. **资源管理**：创建assets文件夹，添加游戏素材
2. **玩家系统**：实现玩家角色、移动、动画
3. **地图系统**：设计地宫布局和瓦片地图
4. **战斗系统**：实现回合制或实时战斗
5. **题目系统**：集成后端API，实现数学题目功能
6. **UI系统**：完善游戏界面和菜单系统

## 运行说明

1. 确保后端服务正在运行（端口8000）
2. 直接在浏览器中打开 `index.html` 文件
3. 或使用本地服务器（推荐）：
   ```bash
   # 使用Python简单服务器
   python -m http.server 8080
   # 然后访问 http://localhost:8080
   ```

## 开发注意事项

- 游戏使用Phaser 3.70.0版本
- 支持现代浏览器（Chrome、Firefox、Safari、Edge）
- 建议使用本地服务器运行以避免CORS问题
- 开发时可将physics.arcade.debug设为true查看碰撞框
